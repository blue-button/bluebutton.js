/* BlueButton.js -- 0.0.17 */

!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.BlueButton=b()}(this,function(){var a=function(){var a=function(a){function b(a){return{el:a,template:c,tag:d,elsByTag:e,attr:f,val:g,isEmpty:i}}if(a.length){for(var h=[],j=0;j<a.length;j++)h.push(b(a[j]));return h}return b(a)},b=function(a,b,c,d){a=a.getElementsByTagName(b);for(var e=0;e<a.length;e++)if(c=o?c.toLowerCase():c,a[e].getAttribute(c)===d)return a[e]},c=function(c){var d=b(this.el,"templateId","root",c);return d?a(d.parentNode):h()},d=function(b){var c=this.el.getElementsByTagName(b)[0];return c?a(c):h()},e=function(b){return a(this.el.getElementsByTagName(b))},f=function(a){return this.el?(a=o?a.toLowerCase():a,this.el.getAttribute(a)):null},g=function(){if(!this.el)return null;try{return this.el.childNodes[0].nodeValue}catch(a){return null}},h=function(){var b=p.createElement("empty");return a(b)},i=function(){return"empty"==this.el.tagName.toLowerCase()?!0:!1},j=function(b){if(!b||"string"!=typeof b)return console.log("BB Error: XML data is not a string"),null;var c;if(o)c=n.jsdom(b,n.level(1,"core"));else if(window.DOMParser)parser=new DOMParser,c=parser.parseFromString(b,"text/xml");else try{c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b)}catch(d){console.log("BB ActiveX Exception: Could not parse XML")}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length?a(c):(console.log("BB Error: Could not parse XML"),null)},k=function(a){if(!a||"string"!=typeof a)return console.log("Error: date is not a string"),null;var b=a.substr(0,4),c=parseInt(a.substr(4,2),10)-1,d=a.substr(6,2);return new Date(b,c,d)},l=function(a){var b;for(var c in a)b=a[c],null===b&&delete a[c],b instanceof Object&&(b=l(b));return a},m=this,n=void 0,o=!1,p=m.document;return"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(o=!0,n=require("jsdom"),p=new(n.level(1,"core").Document)),{parseXML:j,parseDate:k,trim:l}}();!function(){return{}}();var b=function(){var b=a.parseDate,c=function(a,b){var c,f=[];switch(b){case"ccda":c=d(a);break;case"json":return e(a)}for(var g=0;g<c.length;g++)f.push({date_range:{start:c[g].start_date,end:c[g].end_date},name:c[g].name,code:c[g].code,code_system:c[g].code_system,code_system_name:c[g].code_system_name,status:c[g].status,severity:c[g].severity,reaction:{name:c[g].reaction_name,code:c[g].reaction_code,code_system:c[g].reaction_code_system},reaction_type:{name:c[g].reaction_type_name,code:c[g].reaction_type_code,code_system:c[g].reaction_code_system,code_system_name:c[g].reaction_type_code_system_name},allergen:{name:c[g].allergen_name,code:c[g].allergen_code,code_system:c[g].allergen_code_system,code_system_name:c[g].allergen_code_system_name}});return f},d=function(a){var c,d,e,f=[];c=a.template("2.16.840.1.113883.10.20.22.2.6.1"),d=c.elsByTag("entry");for(var g=0;g<d.length;g++){e=d[g],c=e.tag("effectiveTime");var h=b(c.tag("low").attr("value")),i=b(c.tag("high").attr("value"));c=e.template("2.16.840.1.113883.10.20.22.4.7").tag("code");var j=c.attr("displayName"),k=c.attr("code"),l=c.attr("codeSystem"),m=c.attr("codeSystemName");c=e.template("2.16.840.1.113883.10.20.22.4.7").tag("value");var n=c.attr("displayName"),o=c.attr("code"),p=c.attr("codeSystem"),q=c.attr("codeSystemName");c=e.template("2.16.840.1.113883.10.20.22.4.9").tag("value");var r=c.attr("displayName"),s=c.attr("code"),t=c.attr("codeSystem");c=e.template("2.16.840.1.113883.10.20.22.4.8").tag("value");var u=c.attr("displayName");c=e.tag("participant").tag("code");var v=c.attr("displayName"),w=c.attr("code"),x=c.attr("codeSystem"),y=c.attr("codeSystemName");c=e.template("2.16.840.1.113883.10.20.22.4.28").tag("value"),c.attr("displayName"),f.push({name:j,start_date:h,end_date:i,code:k,code_system:l,code_system_name:m,reaction_type_name:n,reaction_type_code:o,reaction_type_code_system:p,reaction_type_code_system_name:q,reaction_name:r,reaction_code:s,reaction_code_system:t,severity:u,allergen_name:v,allergen_code:w,allergen_code_system:x,allergen_code_system_name:y})}return f},e=function(){return{}};return{process:c}}(),c=function(){var b=a.parseDate,c=function(a,b){var c;switch(b){case"ccda":c=d(a);break;case"json":return e(a)}return{name:{prefix:c.prefix,given:c.given,family:c.family},dob:c.dob,gender:c.gender,marital_status:c.marital_status,address:{street:c.street,city:c.city,state:c.state,zip:c.zip,country:c.country},phone:{home:c.home,work:c.work,mobile:c.mobile},email:c.email,language:c.language,race:c.race,ethnicity:c.ethnicity,religion:c.religion,birthplace:{state:c.birthplace_state,zip:c.birthplace_zip,country:c.birthplace_country},guardian:{name:{given:c.guardian_given,family:c.guardian_family},relationship:c.guardian_relationship,address:{street:c.guardian_street,city:c.guardian_city,state:c.guardian_state,zip:c.guardian_zip,country:c.guardian_country},phone:{home:c.guardian_home}},provider:{organization:c.provider_organization,phone:c.provider_phone,address:{street:c.provider_street,city:c.provider_city,state:c.provider_state,zip:c.provider_zip,country:c.provider_country}}}},d=function(a){var c,d,e,f={};c=a.template("2.16.840.1.113883.10.20.22.1.1"),e=c.tag("patientRole"),c=e.tag("patient").tag("name"),f.prefix=c.tag("prefix").val(),d=c.elsByTag("given"),f.given=[];for(var g=0;g<d.length;g++)f.given.push(d[g].val());f.family=c.tag("family").val(),c=e.tag("patient"),f.dob=b(c.tag("birthTime").attr("value"));var h=c.tag("administrativeGenderCode").attr("code"),i={M:"Male",F:"Female",U:"Undifferentiated"};f.gender=i[h]||null,f.marital_status=c.tag("maritalStatusCode").attr("displayName"),c=e.tag("addr"),d=c.elsByTag("streetAddressLine"),f.street=[];for(var g=0;g<d.length;g++)f.street.push(d[g].val());f.city=c.tag("city").val(),f.state=c.tag("state").val(),f.zip=c.tag("postalCode").val(),f.country=c.tag("country").val(),c=e.tag("telecom"),f.home=c.attr("value"),f.work=null,f.mobile=null,f.email=null,f.language=e.tag("languageCommunication").tag("languageCode").attr("code"),f.race=e.tag("raceCode").attr("displayName"),f.ethnicity=e.tag("ethnicGroupCode").attr("displayName"),f.religion=e.tag("religiousAffiliationCode").attr("displayName"),c=e.tag("birthplace"),f.birthplace_state=c.tag("state").val(),f.birthplace_zip=c.tag("postalCode").val(),f.birthplace_country=c.tag("country").val(),c=e.tag("guardian"),f.guardian_relationship=c.tag("code").attr("displayName"),f.guardian_home=c.tag("telecom").attr("value"),c=c.tag("guardianPerson"),d=c.elsByTag("given"),f.guardian_given=[];for(var g=0;g<d.length;g++)f.guardian_given.push(d[g].val());f.guardian_family=c.tag("family").val(),c=e.tag("guardian").tag("addr"),d=c.elsByTag("streetAddressLine"),f.guardian_street=[];for(var g=0;g<d.length;g++)f.guardian_street.push(d[g].val());f.guardian_city=c.tag("city").val(),f.guardian_state=c.tag("state").val(),f.guardian_zip=c.tag("postalCode").val(),f.guardian_country=c.tag("country").val(),c=e.tag("providerOrganization"),f.provider_organization=c.tag("name").val(),f.provider_phone=c.tag("telecom").attr("value"),d=c.elsByTag("streetAddressLine"),f.provider_street=[];for(var g=0;g<d.length;g++)f.provider_street.push(d[g].val());return f.provider_city=c.tag("city").val(),f.provider_state=c.tag("state").val(),f.provider_zip=c.tag("postalCode").val(),f.provider_country=c.tag("country").val(),f},e=function(){return{}};return{process:c}}(),d=function(){var b=a.parseDate,c=function(a,b){var c,f=[];switch(b){case"ccda":c=d(a);break;case"json":return e(a)}for(var g=0;g<c.length;g++)f.push({date:c[g].date,name:c[g].name,code:c[g].code,code_system:c[g].code_system,code_system_name:c[g].code_system_name,code_system_version:c[g].code_system_version,finding:{name:c[g].finding_name,code:c[g].finding_code,code_system:c[g].finding_code_system},translation:{name:c[g].translation_name,code:c[g].translation_code,code_system:c[g].translation_code_system,code_system_name:c[g].translation_code_system_name},performer:{name:c[g].performer_name,code:c[g].performer_code,code_system:c[g].performer_code_system,code_system_name:c[g].performer_code_system_name},location:{organization:c[g].organization,street:c[g].street,city:c[g].city,state:c[g].state,zip:c[g].zip,country:c[g].country}});return f},d=function(a){var c,d,e,f,g=[];c=a.template("2.16.840.1.113883.10.20.22.2.22"),c.isEmpty()&&(c=a.template("2.16.840.1.113883.10.20.22.2.22.1")),e=c.elsByTag("entry");for(var h=0;h<e.length;h++){f=e[h];var i=b(f.tag("effectiveTime").attr("value"));c=f.tag("code");var j=c.attr("displayName"),k=c.attr("code"),l=c.attr("codeSystem"),m=c.attr("codeSystemName"),n=c.attr("codeSystemVersion");c=f.tag("value");var o=c.attr("displayName"),p=c.attr("code"),q=c.attr("codeSystem");c=f.tag("translation");var r=c.attr("displayName"),s=c.attr("code"),t=c.attr("codeSystem"),u=c.attr("codeSystemName");c=f.tag("performer").tag("code");var v=c.attr("displayName"),w=(c.attr("code"),c.attr("codeSystem")),x=c.attr("codeSystemName");c=f.tag("participant");var y=c.tag("code").attr("displayName");d=c.elsByTag("streetAddressLine"),street=[];for(var z=0;z<d.length;z++)street.push(d[z].val());var A=c.tag("city").val(),B=c.tag("state").val(),C=c.tag("postalCode").val(),D=c.tag("country").val();g.push({date:i,name:j,code:k,code_system:l,code_system_name:m,code_system_version:n,finding_name:o,finding_code:p,finding_code_system:q,translation_name:r,translation_code:s,translation_code_system:t,translation_code_system_name:u,performer_name:v,performer_code_system:w,performer_code_system_name:x,organization:y,street:street,city:A,state:B,zip:C,country:D})}return g},e=function(){return{}};return{process:c}}(),e=function(){var b=a.parseDate,c=function(a,b){var c,f=[];switch(b){case"ccda":c=d(a);break;case"json":return e(a)}for(var g=0;g<c.length;g++)f.push({date:c[g].date,product:{name:c[g].product_name,code:c[g].product_code,code_system:c[g].product_code_system,code_system_name:c[g].product_code_system_name,translation:{name:c[g].translation_name,code:c[g].translation_code,code_system:c[g].translation_code_system,code_system_name:c[g].translation_code_system_name}},route:{name:c[g].route_name,code:c[g].route_code,code_system:c[g].route_code_system,code_system_name:c[g].route_code_system_name},instructions:c[g].instructions_text,education_type:{name:c[g].education_name,code:c[g].education_code,code_system:c[g].education_code_system}});return f},d=function(a){var c,d,e,f=[];c=a.template("2.16.840.1.113883.10.20.22.2.2.1"),c.isEmpty()&&(c=a.template("2.16.840.1.113883.10.20.22.2.2")),d=c.elsByTag("entry");for(var g=0;g<d.length;g++){e=d[g],c=e.tag("effectiveTime");var h=b(c.attr("value"));c=e.template("2.16.840.1.113883.10.20.22.4.54").tag("code");var i=c.attr("displayName"),j=c.attr("code"),k=c.attr("codeSystem"),l=c.attr("codeSystemName");c=e.template("2.16.840.1.113883.10.20.22.4.54").tag("translation");var m=c.attr("displayName"),n=c.attr("code"),o=c.attr("codeSystem"),p=c.attr("codeSystemName");c=e.tag("routeCode");var q=c.attr("displayName"),r=c.attr("code"),s=c.attr("codeSystem"),t=c.attr("codeSystemName");c=e.template("2.16.840.1.113883.10.20.22.4.20");var u=c.tag("text").val();c=c.tag("code");var v=c.attr("displayName"),w=c.attr("code"),x=c.attr("codeSystem");f.push({date:h,product_name:i,product_code:j,product_code_system:k,product_code_system_name:l,translation_name:m,translation_code:n,translation_code_system:o,translation_code_system_name:p,route_name:q,route_code:r,route_code_system:s,route_code_system_name:t,instructions_text:u,education_name:v,education_code:w,education_code_system:x})}return f},e=function(){return{}};return{process:c}}(),f=function(){var b=a.parseDate,c=function(a,b){var c,f=[];switch(b){case"ccda":c=d(a);break;case"json":return e(a)}for(var g=0;g<c.length;g++){for(var h=c[g],i={name:h.name,code:h.code,code_system:h.code_system,code_system_name:h.code_system_name},j=[],k=0;k<h.results.length;k++){var l=h.results[k];j.push({date:l.date,name:l.name,value:l.value,unit:l.unit,code:l.code,code_system:l.code_system,code_system_name:l.code_system_name,reference:{low:l.reference_low,high:l.reference_high}})}i.results=j,f.push(i)}return f},d=function(a){var c,d,e,f,g,h,i=[];d=a.template("2.16.840.1.113883.10.20.22.2.3.1"),e=d.elsByTag("entry");for(var j=0;j<e.length;j++){f=e[j],d=f.tag("code");var k=d.attr("displayName"),l=d.attr("code"),m=d.attr("codeSystem"),n=d.attr("codeSystemName");g=f.elsByTag("component"),c=[];for(var o=0;o<g.length;o++){h=g[o];var p=b(h.tag("effectiveTime").attr("value"));d=h.tag("code");var q=d.attr("displayName"),r=d.attr("code"),s=d.attr("codeSystem"),t=d.attr("codeSystemName");d=h.tag("value");var u=parseInt(d.attr("value")),v=d.attr("unit");reference_low=null,reference_high=null,c.push({date:p,name:q,value:u,unit:v,code:r,code_system:s,code_system_name:t,reference_low:reference_low,reference_high:reference_high})}i.push({name:k,code:l,code_system:m,code_system_name:n,results:c})}return i},e=function(){return{}};return{process:c}}(),g=function(){var b=a.parseDate,c=function(a,b){var c,f=[];switch(b){case"ccda":c=d(a);break;case"json":return e(a)}for(var g=0;g<c.length;g++)f.push({date_range:{start:c[g].start_date,end:c[g].end_date},product:{name:c[g].product_name,code:c[g].product_code,code_system:c[g].product_code_system,translation:{name:c[g].translation_name,code:c[g].translation_code,code_system:c[g].translation_code_system,code_system_name:c[g].translation_code_system_name}},dose_quantity:{value:c[g].dose_value,unit:c[g].dose_unit},rate_quantity:{value:c[g].rate_quantity_value,unit:c[g].rate_quantity_unit},precondition:{name:c[g].precondition_name,code:c[g].precondition_code,code_system:c[g].precondition_code_system},reason:{name:c[g].reason_name,code:c[g].reason_code,code_system:c[g].reason_code_system},route:{name:c[g].route_name,code:c[g].route_code,code_system:c[g].route_code_system,code_system_name:c[g].route_code_system_name},vehicle:{name:c[g].vehicle_name,code:c[g].vehicle_code,code_system:c[g].vehicle_code_system,code_system_name:c[g].vehicle_code_system_name},administration:{name:c[g].administration_name,code:c[g].administration_code,code_system:c[g].administration_code_system,code_system_name:c[g].administration_code_system_name},prescriber:{organization:c[g].prescriber_organization,person:c[g].prescriber_person}});return f},d=function(a){var c,d,e,f=[];c=a.template("2.16.840.1.113883.10.20.22.2.1.1"),d=c.elsByTag("entry");for(var g=0;g<d.length;g++){e=d[g],c=e.tag("effectiveTime");var h=b(c.tag("low").attr("value")),i=b(c.tag("high").attr("value"));c=e.tag("manufacturedProduct").tag("code");var j=c.attr("displayName"),k=c.attr("code"),l=c.attr("codeSystem");c=e.tag("manufacturedProduct").tag("translation");var m=c.attr("displayName"),n=c.attr("code"),o=c.attr("codeSystem"),p=c.attr("codeSystemName");c=e.tag("doseQuantity");var q=c.attr("value"),r=c.attr("unit");c=e.tag("rateQuantity");var s=c.attr("value"),t=c.attr("unit");c=e.tag("precondition").tag("value");var u=c.attr("displayName"),v=c.attr("code"),w=c.attr("codeSystem"),c=e.template("2.16.840.1.113883.10.20.22.4.19").tag("value"),x=c.attr("displayName"),y=c.attr("code"),z=c.attr("codeSystem");c=e.tag("routeCode");var A=c.attr("displayName"),B=c.attr("code"),C=c.attr("codeSystem"),D=c.attr("codeSystemName");c=e.tag("participant").tag("code");var E=c.attr("displayName"),F=c.attr("code"),G=c.attr("codeSystem"),H=c.attr("codeSystemName");c=e.tag("administrationUnitCode");var I=c.attr("displayName"),J=c.attr("code"),K=c.attr("codeSystem"),L=c.attr("codeSystemName");c=e.tag("performer");var M=c.tag("name").val(),N=null;f.push({start_date:h,end_date:i,product_name:j,product_code:k,product_code_system:l,translation_name:m,translation_code:n,translation_code_system:o,translation_code_system_name:p,dose_value:q,dose_unit:r,rate_quantity_value:s,rate_quantity_unit:t,precondition_name:u,precondition_code:v,precondition_code_system:w,reason_name:x,reason_code:y,reason_code_system:z,route_name:A,route_code:B,route_code_system:C,route_code_system_name:D,vehicle_name:E,vehicle_code:F,vehicle_code_system:G,vehicle_code_system_name:H,administration_name:I,administration_code:J,administration_code_system:K,administration_code_system_name:L,prescriber_organization:M,prescriber_person:N})}return f},e=function(){return{}};return{process:c}}(),h=function(){var b=a.parseDate,c=function(a,b){var c,f=[];switch(b){case"ccda":c=d(a);break;case"json":return e(a)}for(var g=0;g<c.length;g++)f.push({date_range:{start:c[g].start_date,end:c[g].end_date},name:c[g].name,status:c[g].status,age:c[g].age,code:c[g].code,code_system:c[g].code_system});return f},d=function(a){var c,d,e,f=[];c=a.template("2.16.840.1.113883.10.20.22.2.5.1"),c.isEmpty()&&(c=a.template("2.16.840.1.113883.10.20.22.2.5")),d=c.elsByTag("entry");for(var g=0;g<d.length;g++){e=d[g],c=e.tag("effectiveTime");var h=b(c.tag("low").attr("value")),i=b(c.tag("high").attr("value"));c=e.template("2.16.840.1.113883.10.20.22.4.4").tag("value");var j=c.attr("displayName"),k=c.attr("code"),l=c.attr("codeSystem");c=e.template("2.16.840.1.113883.10.20.22.4.6");var m=c.tag("value").attr("displayName");c=e.template("2.16.840.1.113883.10.20.22.4.31");var n=parseInt(c.tag("value").attr("value"));f.push({start_date:h,end_date:i,name:j,code:k,code_system:l,status:m,age:n})}return f},e=function(){return{}};return{process:c}}(),i=function(){var b=a.parseDate,c=function(a,b){var c,f=[];switch(b){case"ccda":c=d(a);break;case"json":return e(a)}for(var g=0;g<c.length;g++)f.push({date:c[g].date,name:c[g].name,code:c[g].code,code_system:c[g].code_system,specimen:{name:c[g].specimen_name,code:c[g].specimen_code,code_system:c[g].specimen_code_system},performer:{organization:c[g].organization,street:c[g].street,city:c[g].city,state:c[g].state,zip:c[g].zip,country:c[g].country,phone:c[g].phone},device:{name:c[g].device_name,code:c[g].device_code,code_system:c[g].device_code_system}});return f},d=function(a){var c,d,e,f,g=[];c=a.template("2.16.840.1.113883.10.20.22.2.7.1"),c.isEmpty()&&(c=a.template("2.16.840.1.113883.10.20.22.2.7")),e=c.elsByTag("entry");for(var h=0;h<e.length;h++){f=e[h],c=f.tag("effectiveTime");var i=b(c.attr("value"));c=f.tag("code");var j=c.attr("displayName"),k=c.attr("code"),l=c.attr("codeSystem"),m=null,n=null,o=null;c=f.tag("performer").tag("addr");var p=c.tag("name").val(),q=c.tag("telecom").attr("value");d=c.elsByTag("streetAddressLine"),street=[];for(var r=0;r<d.length;r++)street.push(d[r].val());var s=c.tag("city").val(),t=c.tag("state").val(),u=c.tag("postalCode").val(),v=c.tag("country").val();c=f.tag("participant").tag("code");var w=c.attr("displayName"),x=c.attr("code"),y=c.attr("codeSystem");g.push({date:i,name:j,code:k,code_system:l,specimen_name:m,specimen_code:n,specimen_code_system:o,organization:p,phone:q,street:street,city:s,state:t,zip:u,country:v,device_name:w,device_code:x,device_code_system:y})}return g},e=function(){return{}};return{process:c}}(),j=function(){var b=a.parseDate,c=function(a,b){var c,f=[];switch(b){case"ccda":c=d(a);break;case"json":return e(a)}for(var g=0;g<c.length;g++){for(var h=c[g],i={date:h.date},j=[],k=0;k<h.results.length;k++){var l=h.results[k];j.push({name:l.name,code:l.code,code_system:l.code_system,code_system_name:l.code_system_name,value:l.value,unit:l.unit})}i.results=j,f.push(i)}return f},d=function(a){var c,d,e,f,g,h,i=[];d=a.template("2.16.840.1.113883.10.20.22.2.4.1"),e=d.elsByTag("entry");for(var j=0;j<e.length;j++){f=e[j],d=f.tag("effectiveTime");var k=b(d.attr("value"));g=f.elsByTag("component"),c=[];for(var l=0;l<g.length;l++){h=g[l],d=h.tag("code");var m=d.attr("displayName"),n=d.attr("code"),o=d.attr("codeSystem"),p=d.attr("codeSystemName");d=h.tag("value");var q=parseInt(d.attr("value")),r=d.attr("unit");c.push({name:m,code:n,code_system:o,code_system_name:p,value:q,unit:r})}i.push({date:k,results:c})}return i},e=function(){return{}};return{process:c}}(),k=function(k){var l=null,m="",n={},o=function(a){for(var b=0;b<a.length;b++)a[b].json=function(){return JSON.stringify(this,null,2)}},p=function(){return n.document},q=function(){return n.allergies},r=function(){return n.demographics},s=function(){return n.encounters},t=function(){return n.immunizations},u=function(){return n.labs},v=function(){return n.medications},w=function(){return n.problems},x=function(){return n.procedures},y=function(){return n.vitals};if(k=k.replace(/^\s+|\s+$/g,""),"<?xml"==k.substr(0,5))l=a.parseXML(k),m="ccda",n.document={type:m},n.allergies=b.process(l,m),n.demographics=c.process(l,m),n.encounters=d.process(l,m),n.immunizations=e.process(l,m),n.labs=f.process(l,m),n.medications=g.process(l,m),n.problems=h.process(l,m),n.procedures=i.process(l,m),n.vitals=j.process(l,m),o([n,n.document,n.allergies,n.demographics,n.encounters,n.immunizations,n.labs,n.medications,n.problems,n.procedures,n.vitals]);else{m="json";try{var z=JSON.parse(k)}catch(A){console.log("BB Exception: Could not parse JSON")}n.document={type:m},n.allergies=b.process(z,m),n.demographics=c.process(z,m),n.encounters=d.process(z,m),n.immunizations=e.process(z,m),n.labs=f.process(z,m),n.medications=g.process(z,m),n.problems=h.process(z,m),n.procedures=i.process(z,m),n.vitals=j.process(z,m)}return{data:n,xmlDOM:l,document:p,allergies:q,demographics:r,encounters:s,immunizations:t,labs:u,medications:v,problems:w,procedures:x,vitals:y}};return k});